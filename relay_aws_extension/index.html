<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="AWS extension implementation for Sentry’s AWS Lambda layer."><title>relay_aws_extension - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="relay_aws_extension" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../relay_aws_extension/index.html"><img src="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../relay_aws_extension/index.html"><img src="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png" alt="logo"></a><h2 class="location"><a href="#">Crate relay_aws_extension</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 23.10.1</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">relay_aws_extension</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/relay_aws_extension/lib.rs.html#1-31">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>AWS extension implementation for Sentry’s AWS Lambda layer.</p>
<p>An AWS extension is a binary that is bundled along with the SDK and its dependencies in an AWS
Layer that is added to a user’s Lambda function. The Lambda Runtime will start the extension
binary as a concurrent process that runs independently of the actual function invocation and
continues running across multiple function invocations.</p>
<p>Sentry’s extension is basically existing Relay running in proxy mode with an additional
<a href="struct.AwsExtension.html" title="struct relay_aws_extension::AwsExtension"><code>AwsExtension</code></a> service. The service takes care of the extension lifecycle, namely registering
the extension and continuously polling for next events. Note that the interval between two next
event calls adds to the billing time of the lambda invocation.</p>
<p>The main advantage we get currently from the extension is the lambda function not having to wait
for the event being sent to Sentry by the SDK. The actual sending happens in a concurrent Relay
process so the main function can return sooner and reduce response time of the user’s function.
In the future, we might use some of <a href="struct.RegisterResponse.html" title="struct relay_aws_extension::RegisterResponse"><code>RegisterResponse</code></a> and <a href="enum.NextEventResponse.html" title="enum relay_aws_extension::NextEventResponse"><code>NextEventResponse</code></a>’s fields in
the event payload but that requires intercepting the envelope and modifying it before sending to
upstream.</p>
<p>See the official <a href="https://docs.aws.amazon.com/lambda/latest/dg/runtimes-extensions-api.html">Lambda Extensions API
documentation</a> for
further details.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AwsExtension.html" title="struct relay_aws_extension::AwsExtension">AwsExtension</a></div><div class="desc docblock-short">Service implementing an AWS extension.</div></li><li><div class="item-name"><a class="struct" href="struct.AwsExtensionError.html" title="struct relay_aws_extension::AwsExtensionError">AwsExtensionError</a></div><div class="desc docblock-short">Generic error in an AWS extension context.</div></li><li><div class="item-name"><a class="struct" href="struct.InvokeResponse.html" title="struct relay_aws_extension::InvokeResponse">InvokeResponse</a></div><div class="desc docblock-short">Response received from the next event API on an <code>INVOKE</code> event.</div></li><li><div class="item-name"><a class="struct" href="struct.RegisterResponse.html" title="struct relay_aws_extension::RegisterResponse">RegisterResponse</a></div><div class="desc docblock-short">Response received from the register API.</div></li><li><div class="item-name"><a class="struct" href="struct.ShutdownResponse.html" title="struct relay_aws_extension::ShutdownResponse">ShutdownResponse</a></div><div class="desc docblock-short">Response received from the next event API on a <code>SHUTDOWN</code> event.</div></li><li><div class="item-name"><a class="struct" href="struct.Tracing.html" title="struct relay_aws_extension::Tracing">Tracing</a></div><div class="desc docblock-short">Tracing headers from an <a href="struct.InvokeResponse.html" title="struct relay_aws_extension::InvokeResponse"><code>InvokeResponse</code></a>.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.NextEventResponse.html" title="enum relay_aws_extension::NextEventResponse">NextEventResponse</a></div><div class="desc docblock-short">All possible next event responses.</div></li></ul></section></div></main></body></html>